{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"EChartify","text":"<p>A non-polymorphic JSON Intermediate Representation (IR) for Apache ECharts that enables AI assistants to reliably generate and validate chart configurations.</p>"},{"location":"#why-echartify","title":"Why EChartify?","text":"<p>Apache ECharts uses a highly polymorphic <code>option</code> object where:</p> <ul> <li>The <code>series</code> array changes shape based on <code>type</code> (line, bar, pie, scatter, etc.)</li> <li>Fields are context-sensitive with implicit defaults</li> <li>Cross-field dependencies exist (e.g., coordinate systems affect valid fields)</li> </ul> <p>This polymorphism makes it difficult for AI assistants to generate correct configurations. EChartify solves this with:</p> Feature Benefit Non-polymorphic IR Same structure for all chart types Simple JSON Schema No <code>oneOf</code>, <code>anyOf</code>, or conditional logic TypeScript-first Zod schemas as the source of truth Deterministic compiler IR \u2192 ECharts transformation"},{"location":"#architecture","title":"Architecture","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    Data Flow                            \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                         \u2502\n\u2502   AI / User                                             \u2502\n\u2502       \u2502                                                 \u2502\n\u2502       \u25bc                                                 \u2502\n\u2502   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                                           \u2502\n\u2502   \u2502Chart IR \u2502  \u25c4\u2500\u2500 Non-polymorphic JSON                 \u2502\n\u2502   \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2518                                           \u2502\n\u2502        \u2502                                                \u2502\n\u2502        \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                             \u2502\n\u2502        \u25bc                  \u25bc                             \u2502\n\u2502   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510       \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                       \u2502\n\u2502   \u2502  Zod    \u2502       \u2502JSON Schema\u2502\u2500\u2500\u25ba Go (backend)       \u2502\n\u2502   \u2502 Schema  \u2502       \u2502(generated)\u2502                       \u2502\n\u2502   \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2518       \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                       \u2502\n\u2502        \u2502                                                \u2502\n\u2502        \u25bc                                                \u2502\n\u2502   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                                           \u2502\n\u2502   \u2502Compiler \u2502                                           \u2502\n\u2502   \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2518                                           \u2502\n\u2502        \u2502                                                \u2502\n\u2502        \u25bc                                                \u2502\n\u2502   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                                           \u2502\n\u2502   \u2502 ECharts \u2502                                           \u2502\n\u2502   \u2502 Option  \u2502                                           \u2502\n\u2502   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                                           \u2502\n\u2502                                                         \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"#features","title":"Features","text":"<ul> <li>5 Chart Types: Line, bar, pie, scatter, area</li> <li>Typed Datasets: Column metadata enables automatic type coercion</li> <li>Validation: Zod schemas provide detailed error messages</li> <li>Dual Language: TypeScript and Go implementations</li> <li>AI-Ready: Simple schema ideal for LLM code generation</li> </ul>"},{"location":"#quick-links","title":"Quick Links","text":"<ul> <li>Getting Started - Installation and basic usage</li> <li>Schema Reference - Complete IR specification</li> <li>Examples - Chart configuration examples</li> <li>API Reference - TypeScript and Go APIs</li> </ul>"},{"location":"#project-status","title":"Project Status","text":""},{"location":"#license","title":"License","text":"<p>MIT</p>"},{"location":"api-reference/","title":"API Reference","text":"<p>EChartify provides APIs for both TypeScript/JavaScript and Go.</p>"},{"location":"api-reference/#typescript-api","title":"TypeScript API","text":""},{"location":"api-reference/#installation","title":"Installation","text":"<pre><code>npm install @grokify/echartify\n</code></pre>"},{"location":"api-reference/#schemas-zod","title":"Schemas (Zod)","text":"<p>Zod schemas for runtime validation.</p> <pre><code>import {\n  chartIRSchema,\n  datasetSchema,\n  columnSchema,\n  markSchema,\n  axisSchema,\n  legendSchema,\n  tooltipSchema,\n  gridSchema,\n  styleSchema,\n  encodeSchema,\n  geometrySchema,\n  coordinateSystemSchema,\n  axisTypeSchema,\n  axisPositionSchema,\n  legendPositionSchema,\n  tooltipTriggerSchema,\n} from \"@grokify/echartify\";\n</code></pre>"},{"location":"api-reference/#chartirschema","title":"<code>chartIRSchema</code>","text":"<p>The main schema for validating complete chart IR documents.</p> <pre><code>// Strict validation (throws on error)\nconst ir = chartIRSchema.parse(jsonData);\n\n// Safe validation (returns result object)\nconst result = chartIRSchema.safeParse(jsonData);\nif (result.success) {\n  const ir = result.data;\n} else {\n  console.error(result.error.issues);\n}\n</code></pre>"},{"location":"api-reference/#types","title":"Types","text":"<p>TypeScript types inferred from Zod schemas.</p> <pre><code>import type {\n  ChartIR,\n  Dataset,\n  Column,\n  ColumnType,\n  Mark,\n  Axis,\n  Legend,\n  Tooltip,\n  Grid,\n  Style,\n  Encode,\n  Geometry,\n  CoordinateSystem,\n  AxisType,\n  AxisPosition,\n  LegendPosition,\n  TooltipTrigger,\n} from \"@grokify/echartify\";\n</code></pre>"},{"location":"api-reference/#compiler","title":"Compiler","text":"<p>Transform validated IR to ECharts options.</p> <pre><code>import { compile } from \"@grokify/echartify\";\n\nconst option = compile(validatedIR);\n// Returns EChartsOption ready for setOption()\n</code></pre>"},{"location":"api-reference/#compileir-chartir-echartsoption","title":"<code>compile(ir: ChartIR): EChartsOption</code>","text":"<p>Compiles a validated ChartIR document to an ECharts option object.</p> <p>Parameters:</p> <ul> <li><code>ir</code> - A validated ChartIR object</li> </ul> <p>Returns:</p> <ul> <li>ECharts option object compatible with <code>chart.setOption()</code></li> </ul> <p>Features:</p> <ul> <li>Converts string values to numbers based on column type metadata</li> <li>Maps geometry types to ECharts series types</li> <li>Translates encode fields to ECharts encode format</li> <li>Applies styling options (lineStyle, itemStyle, areaStyle)</li> </ul>"},{"location":"api-reference/#helpers","title":"Helpers","text":"<p>Utility functions for working with IR.</p> <pre><code>import { isHorizontalAxis, isVerticalAxis } from \"@grokify/echartify\";\n\n// Check axis orientation\nif (isHorizontalAxis(axis)) {\n  // axis.position is \"bottom\" or \"top\"\n}\n\nif (isVerticalAxis(axis)) {\n  // axis.position is \"left\" or \"right\"\n}\n</code></pre>"},{"location":"api-reference/#complete-example","title":"Complete Example","text":"<pre><code>import { chartIRSchema, compile } from \"@grokify/echartify\";\nimport type { ChartIR } from \"@grokify/echartify\";\nimport * as echarts from \"echarts\";\n\n// Type-safe IR definition\nconst ir: ChartIR = {\n  title: \"Sales\",\n  datasets: [{\n    id: \"data\",\n    columns: [\n      { name: \"month\", type: \"string\" },\n      { name: \"sales\", type: \"number\" }\n    ],\n    rows: [[\"Jan\", \"100\"], [\"Feb\", \"200\"]]\n  }],\n  marks: [{\n    id: \"line\",\n    datasetId: \"data\",\n    geometry: \"line\",\n    encode: { x: \"month\", y: \"sales\" }\n  }]\n};\n\n// Validate\nconst validated = chartIRSchema.parse(ir);\n\n// Compile\nconst option = compile(validated);\n\n// Render\nconst chart = echarts.init(document.getElementById(\"chart\")!);\nchart.setOption(option);\n</code></pre>"},{"location":"api-reference/#go-api","title":"Go API","text":""},{"location":"api-reference/#installation_1","title":"Installation","text":"<pre><code>go get github.com/grokify/echartify\n</code></pre>"},{"location":"api-reference/#package-chartir","title":"Package <code>chartir</code>","text":"<p>Go types for the Chart IR schema.</p> <pre><code>import \"github.com/grokify/echartify/chartir\"\n</code></pre>"},{"location":"api-reference/#types_1","title":"Types","text":"<pre><code>// ChartIR is the top-level chart definition\ntype ChartIR struct {\n    Title    string    `json:\"title,omitempty\"`\n    Datasets []Dataset `json:\"datasets\"`\n    Marks    []Mark    `json:\"marks\"`\n    Axes     []Axis    `json:\"axes,omitempty\"`\n    Legend   *Legend   `json:\"legend,omitempty\"`\n    Tooltip  *Tooltip  `json:\"tooltip,omitempty\"`\n    Grid     *Grid     `json:\"grid,omitempty\"`\n}\n\n// Dataset represents a data source\ntype Dataset struct {\n    ID      string     `json:\"id\"`\n    Columns []Column   `json:\"columns\"`\n    Rows    [][]string `json:\"rows\"`\n}\n\n// Column defines a data column with type\ntype Column struct {\n    Name string     `json:\"name\"`\n    Type ColumnType `json:\"type\"`\n}\n\n// ColumnType is \"string\" or \"number\"\ntype ColumnType string\n\nconst (\n    ColumnTypeString ColumnType = \"string\"\n    ColumnTypeNumber ColumnType = \"number\"\n)\n\n// Mark represents a visual mark (series)\ntype Mark struct {\n    ID               string           `json:\"id\"`\n    DatasetID        string           `json:\"datasetId\"`\n    Geometry         Geometry         `json:\"geometry\"`\n    Encode           Encode           `json:\"encode\"`\n    CoordinateSystem CoordinateSystem `json:\"coordinateSystem,omitempty\"`\n    Style            *Style           `json:\"style,omitempty\"`\n    Stack            string           `json:\"stack,omitempty\"`\n    Smooth           bool             `json:\"smooth,omitempty\"`\n    Name             string           `json:\"name,omitempty\"`\n}\n</code></pre>"},{"location":"api-reference/#geometry-constants","title":"Geometry Constants","text":"<pre><code>const (\n    GeometryLine    Geometry = \"line\"\n    GeometryBar     Geometry = \"bar\"\n    GeometryPie     Geometry = \"pie\"\n    GeometryScatter Geometry = \"scatter\"\n    GeometryArea    Geometry = \"area\"\n)\n</code></pre>"},{"location":"api-reference/#axistype-constants","title":"AxisType Constants","text":"<pre><code>const (\n    AxisTypeCategory AxisType = \"category\"\n    AxisTypeValue    AxisType = \"value\"\n    AxisTypeTime     AxisType = \"time\"\n    AxisTypeLog      AxisType = \"log\"\n)\n</code></pre>"},{"location":"api-reference/#package-schema","title":"Package <code>schema</code>","text":"<p>Embedded JSON Schema for validation.</p> <pre><code>import \"github.com/grokify/echartify/schema\"\n</code></pre>"},{"location":"api-reference/#variables","title":"Variables","text":"<pre><code>// ChartIRSchema is the embedded JSON Schema as a string\nvar ChartIRSchema string\n</code></pre>"},{"location":"api-reference/#functions","title":"Functions","text":"<pre><code>// ChartIRSchemaBytes returns the schema as a byte slice\nfunc ChartIRSchemaBytes() []byte\n</code></pre>"},{"location":"api-reference/#complete-example_1","title":"Complete Example","text":"<pre><code>package main\n\nimport (\n    \"encoding/json\"\n    \"fmt\"\n    \"log\"\n\n    \"github.com/grokify/echartify/chartir\"\n    \"github.com/grokify/echartify/schema\"\n)\n\nfunc main() {\n    // Create chart IR\n    ir := chartir.ChartIR{\n        Title: \"Sales Report\",\n        Datasets: []chartir.Dataset{{\n            ID: \"sales\",\n            Columns: []chartir.Column{\n                {Name: \"month\", Type: chartir.ColumnTypeString},\n                {Name: \"revenue\", Type: chartir.ColumnTypeNumber},\n            },\n            Rows: [][]string{\n                {\"Jan\", \"1000\"},\n                {\"Feb\", \"1500\"},\n                {\"Mar\", \"1200\"},\n            },\n        }},\n        Marks: []chartir.Mark{{\n            ID:        \"line\",\n            DatasetID: \"sales\",\n            Geometry:  chartir.GeometryLine,\n            Encode: chartir.Encode{\n                X: \"month\",\n                Y: \"revenue\",\n            },\n            Smooth: true,\n        }},\n        Axes: []chartir.Axis{\n            {ID: \"x\", Type: chartir.AxisTypeCategory, Position: chartir.AxisPositionBottom},\n            {ID: \"y\", Type: chartir.AxisTypeValue, Position: chartir.AxisPositionLeft},\n        },\n    }\n\n    // Serialize to JSON\n    data, err := json.MarshalIndent(ir, \"\", \"  \")\n    if err != nil {\n        log.Fatal(err)\n    }\n    fmt.Println(string(data))\n\n    // Access schema for validation\n    fmt.Printf(\"\\nSchema size: %d bytes\\n\", len(schema.ChartIRSchemaBytes()))\n}\n</code></pre>"},{"location":"api-reference/#json-schema-validation","title":"JSON Schema Validation","text":"<p>Use the embedded schema with a JSON Schema validator:</p> <pre><code>import (\n    \"github.com/grokify/echartify/schema\"\n    \"github.com/santhosh-tekuri/jsonschema/v5\"\n)\n\nfunc validateIR(jsonData []byte) error {\n    sch, err := jsonschema.CompileString(\"chartir.schema.json\", schema.ChartIRSchema)\n    if err != nil {\n        return err\n    }\n\n    var v interface{}\n    if err := json.Unmarshal(jsonData, &amp;v); err != nil {\n        return err\n    }\n\n    return sch.Validate(v)\n}\n</code></pre>"},{"location":"architecture/","title":"Architecture","text":"<p>This document describes the technical architecture of EChartify.</p>"},{"location":"architecture/#data-flow","title":"Data Flow","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                  TypeScript-First Data Flow                     \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                                 \u2502\n\u2502  AI Assistant / User                                            \u2502\n\u2502         \u2502                                                       \u2502\n\u2502         \u25bc                                                       \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                                                \u2502\n\u2502  \u2502  Chart IR   \u2502  \u25c4\u2500\u2500 Non-polymorphic JSON                      \u2502\n\u2502  \u2502   (JSON)    \u2502                                                \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518                                                \u2502\n\u2502         \u2502                                                       \u2502\n\u2502         \u25bc                                                       \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510        \u2502\n\u2502  \u2502 TypeScript  \u2502 \u2500\u2500\u25ba \u2502 JSON Schema \u2502 \u2500\u2500\u25ba \u2502  Go Types   \u2502        \u2502\n\u2502  \u2502 Zod Schemas \u2502     \u2502 (Generated) \u2502     \u2502 (Secondary) \u2502        \u2502\n\u2502  \u2502  (SOURCE)   \u2502     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518        \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518            \u2502                                   \u2502\n\u2502         \u2502                   \u25bc                                   \u2502\n\u2502         \u2502            \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                            \u2502\n\u2502         \u2502            \u2502  Backend    \u2502                            \u2502\n\u2502         \u2502            \u2502 Validation  \u2502                            \u2502\n\u2502         \u2502            \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                            \u2502\n\u2502         \u2502                                                       \u2502\n\u2502         \u25bc                                                       \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                                                \u2502\n\u2502  \u2502  Compiler   \u2502                                                \u2502\n\u2502  \u2502 (TypeScript)\u2502                                                \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518                                                \u2502\n\u2502         \u2502                                                       \u2502\n\u2502         \u25bc                                                       \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                                                \u2502\n\u2502  \u2502  ECharts    \u2502                                                \u2502\n\u2502  \u2502   Option    \u2502                                                \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                                                \u2502\n\u2502                                                                 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"architecture/#design-principles","title":"Design Principles","text":"<ol> <li>TypeScript/Zod schemas are the source of truth - Canonical IR definition in TypeScript</li> <li>Non-polymorphic IR - Single shape for all chart types</li> <li>Compiler handles complexity - Polymorphism resolved at compile time</li> <li>Layered architecture - Separate data, geometry, encoding, style</li> <li>Generated artifacts - JSON Schema and Go types derived from Zod</li> </ol>"},{"location":"architecture/#why-non-polymorphic","title":"Why Non-Polymorphic?","text":"<p>Apache ECharts uses a polymorphic <code>option</code> object:</p> <pre><code>// ECharts: Shape changes based on type\n{\n  series: [\n    { type: \"line\", data: [...], smooth: true },\n    { type: \"pie\", data: [...], radius: \"50%\" }  // Different structure!\n  ]\n}\n</code></pre> <p>This causes problems:</p> <ul> <li>AI generation errors - LLMs mix up fields between chart types</li> <li>Schema complexity - JSON Schema requires <code>oneOf</code>/<code>anyOf</code> discriminators</li> <li>Type degradation - Go types become <code>interface{}</code> for union types</li> </ul> <p>EChartify solves this with uniform structure:</p> <pre><code>{\n  \"marks\": [\n    { \"id\": \"line\", \"geometry\": \"line\", \"encode\": { \"x\": \"a\", \"y\": \"b\" }, \"smooth\": true },\n    { \"id\": \"pie\", \"geometry\": \"pie\", \"encode\": { \"value\": \"v\", \"name\": \"n\" } }\n  ]\n}\n</code></pre> <p>All marks have the same shape. The <code>geometry</code> field is an enum, not a discriminator that changes structure.</p>"},{"location":"architecture/#compilation-strategy","title":"Compilation Strategy","text":"<p>The compiler transforms IR \u2192 ECharts options:</p>"},{"location":"architecture/#mapping-rules","title":"Mapping Rules","text":"IR Concept ECharts Equivalent <code>ChartIR.title</code> <code>option.title.text</code> <code>ChartIR.datasets</code> <code>option.dataset</code> <code>ChartIR.marks</code> <code>option.series</code> <code>ChartIR.axes</code> <code>option.xAxis</code> / <code>option.yAxis</code> <code>Mark.geometry</code> <code>series.type</code> <code>Mark.encode</code> <code>series.encode</code> <code>Mark.style</code> <code>series.itemStyle</code> / <code>series.lineStyle</code>"},{"location":"architecture/#geometry-series-type","title":"Geometry \u2192 Series Type","text":"IR Geometry ECharts Type Notes <code>line</code> <code>line</code> <code>bar</code> <code>bar</code> <code>pie</code> <code>pie</code> Uses value/name encoding <code>scatter</code> <code>scatter</code> <code>area</code> <code>line</code> With <code>areaStyle</code>"},{"location":"architecture/#data-type-coercion","title":"Data Type Coercion","text":"<p>All dataset values are stored as strings for schema compliance:</p> <pre><code>{\n  \"columns\": [\n    { \"name\": \"month\", \"type\": \"string\" },\n    { \"name\": \"sales\", \"type\": \"number\" }\n  ],\n  \"rows\": [\n    [\"Jan\", \"1000\"],\n    [\"Feb\", \"1500\"]\n  ]\n}\n</code></pre> <p>The compiler parses string values to numbers based on column type metadata.</p>"},{"location":"architecture/#project-structure","title":"Project Structure","text":"<pre><code>echartify/\n\u251c\u2500\u2500 ts/                          # TypeScript (SOURCE OF TRUTH)\n\u2502   \u251c\u2500\u2500 src/\n\u2502   \u2502   \u251c\u2500\u2500 schema/              # Zod schemas (canonical)\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 chartir.ts\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 dataset.ts\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 mark.ts\n\u2502   \u2502   \u2502   \u2514\u2500\u2500 ...\n\u2502   \u2502   \u251c\u2500\u2500 compiler/            # IR \u2192 ECharts compiler\n\u2502   \u2502   \u2502   \u2514\u2500\u2500 compile.ts\n\u2502   \u2502   \u2514\u2500\u2500 index.ts\n\u2502   \u251c\u2500\u2500 scripts/\n\u2502   \u2502   \u2514\u2500\u2500 generate-schema.ts   # JSON Schema generator\n\u2502   \u2514\u2500\u2500 tests/                   # 53 tests\n\u2502\n\u251c\u2500\u2500 schema/                      # Generated JSON Schema\n\u2502   \u251c\u2500\u2500 schema.go                # Go embed\n\u2502   \u2514\u2500\u2500 chartir.schema.json\n\u2502\n\u251c\u2500\u2500 chartir/                     # Go IR types (secondary)\n\u2502   \u251c\u2500\u2500 chartir.go\n\u2502   \u251c\u2500\u2500 dataset.go\n\u2502   \u2514\u2500\u2500 ...\n\u2502\n\u2514\u2500\u2500 examples/                    # Example IR documents\n</code></pre>"},{"location":"architecture/#schema-generation","title":"Schema Generation","text":"<p>JSON Schema is generated from Zod using <code>zod-to-json-schema</code>:</p> <pre><code>cd ts &amp;&amp; npm run generate:schema\n</code></pre> <p>This produces <code>schema/chartir.schema.json</code> which:</p> <ul> <li>Passes <code>schemalint lint --profile scale</code> for static type compatibility</li> <li>Contains no <code>oneOf</code>/<code>anyOf</code> discriminators</li> <li>Can be used for validation in any language</li> </ul>"},{"location":"architecture/#validation-strategy","title":"Validation Strategy","text":""},{"location":"architecture/#frontend-typescript","title":"Frontend (TypeScript)","text":"<pre><code>import { chartIRSchema, compile } from \"@grokify/echartify\";\n\nconst result = chartIRSchema.safeParse(jsonData);\nif (result.success) {\n  const option = compile(result.data);\n}\n</code></pre>"},{"location":"architecture/#backend-go","title":"Backend (Go)","text":"<pre><code>import \"github.com/grokify/echartify/chartir\"\n\nvar ir chartir.ChartIR\njson.Unmarshal(data, &amp;ir)\n// Use embedded schema for additional validation if needed\n</code></pre>"},{"location":"architecture/#dependencies","title":"Dependencies","text":""},{"location":"architecture/#typescript","title":"TypeScript","text":"Package Purpose <code>zod</code> Runtime validation schemas <code>zod-to-json-schema</code> JSON Schema generation <code>echarts</code> Type definitions"},{"location":"architecture/#go","title":"Go","text":"Package Purpose <code>github.com/invopop/jsonschema</code> Schema generation (optional)"},{"location":"architecture/#test-coverage","title":"Test Coverage","text":"Component Tests Coverage TypeScript Schema 19 Enum values, validation, helpers TypeScript Compiler 22 Geometry mapping, style compilation TypeScript Examples 12 All example files Go Types 8 JSON marshaling, enum coverage Go Schema 2 Schema embedding Total 63"},{"location":"architecture/#future-considerations","title":"Future Considerations","text":"<ol> <li>Multi-axis support - Charts with multiple Y axes</li> <li>Theme integration - Theme references vs inline styles</li> <li>Additional geometries - Radar, heatmap, treemap</li> <li>Go compiler - Full compilation in Go for backend rendering</li> </ol>"},{"location":"development/","title":"Development","text":"<p>This guide covers setting up the development environment and contributing to EChartify.</p>"},{"location":"development/#prerequisites","title":"Prerequisites","text":"<ul> <li>Node.js 20.x or 22.x</li> <li>Go 1.25.x or 1.26.x</li> <li>npm 9.x or later</li> </ul>"},{"location":"development/#setup","title":"Setup","text":""},{"location":"development/#clone-the-repository","title":"Clone the Repository","text":"<pre><code>git clone https://github.com/grokify/echartify.git\ncd echartify\n</code></pre>"},{"location":"development/#typescript-setup","title":"TypeScript Setup","text":"<pre><code>cd ts\nnpm install\n</code></pre>"},{"location":"development/#go-setup","title":"Go Setup","text":"<pre><code>go mod download\n</code></pre>"},{"location":"development/#development-workflow","title":"Development Workflow","text":""},{"location":"development/#typescript","title":"TypeScript","text":"<pre><code>cd ts\n\n# Run tests (53 tests)\nnpm test\n\n# Run tests in watch mode\nnpm run test:watch\n\n# Build the library\nnpm run build\n\n# Run linter\nnpm run lint\n\n# Generate JSON Schema from Zod\nnpm run generate:schema\n\n# Start visual demo\nnpm run demo\n</code></pre>"},{"location":"development/#go","title":"Go","text":"<pre><code># Run tests (10 tests)\ngo test -v ./...\n\n# Run linter\ngolangci-lint run\n\n# Check coverage\ngo test -coverprofile=coverage.out ./...\ngo tool cover -html=coverage.out\n</code></pre>"},{"location":"development/#project-structure","title":"Project Structure","text":"<pre><code>echartify/\n\u251c\u2500\u2500 ts/                          # TypeScript (source of truth)\n\u2502   \u251c\u2500\u2500 src/\n\u2502   \u2502   \u251c\u2500\u2500 schema/              # Zod schemas\n\u2502   \u2502   \u251c\u2500\u2500 compiler/            # IR \u2192 ECharts compiler\n\u2502   \u2502   \u2514\u2500\u2500 index.ts             # Main exports\n\u2502   \u251c\u2500\u2500 tests/                   # Test files\n\u2502   \u251c\u2500\u2500 demo/                    # Visual demo\n\u2502   \u2514\u2500\u2500 scripts/                 # Build scripts\n\u2502\n\u251c\u2500\u2500 schema/                      # JSON Schema (generated)\n\u2502   \u251c\u2500\u2500 schema.go                # Go embed\n\u2502   \u2514\u2500\u2500 chartir.schema.json\n\u2502\n\u251c\u2500\u2500 chartir/                     # Go types\n\u2502\n\u2514\u2500\u2500 examples/                    # Example IR documents\n</code></pre>"},{"location":"development/#adding-a-new-chart-type","title":"Adding a New Chart Type","text":""},{"location":"development/#1-update-typescript-schema","title":"1. Update TypeScript Schema","text":"<p>Edit <code>ts/src/schema/mark.ts</code>:</p> <pre><code>export const geometrySchema = z.enum([\n  \"line\",\n  \"bar\",\n  \"pie\",\n  \"scatter\",\n  \"area\",\n  \"radar\",  // New geometry\n]);\n</code></pre>"},{"location":"development/#2-update-compiler","title":"2. Update Compiler","text":"<p>Edit <code>ts/src/compiler/compile.ts</code>:</p> <pre><code>function mapGeometry(geometry: Geometry): string {\n  switch (geometry) {\n    // ... existing cases\n    case \"radar\":\n      return \"radar\";\n  }\n}\n\nfunction compileMark(mark: Mark): Record&lt;string, unknown&gt; {\n  // ... add radar-specific handling\n}\n</code></pre>"},{"location":"development/#3-add-tests","title":"3. Add Tests","text":"<p>Create tests in <code>ts/tests/compiler.test.ts</code>:</p> <pre><code>test(\"compiles radar chart\", () =&gt; {\n  const ir: ChartIR = {\n    datasets: [{ /* ... */ }],\n    marks: [{\n      id: \"radar\",\n      datasetId: \"data\",\n      geometry: \"radar\",\n      encode: { /* ... */ }\n    }]\n  };\n\n  const option = compile(ir);\n  expect(option.series?.[0]).toMatchObject({\n    type: \"radar\"\n  });\n});\n</code></pre>"},{"location":"development/#4-update-go-types","title":"4. Update Go Types","text":"<p>Edit <code>chartir/mark.go</code>:</p> <pre><code>const (\n    GeometryLine    Geometry = \"line\"\n    GeometryBar     Geometry = \"bar\"\n    // ...\n    GeometryRadar   Geometry = \"radar\"\n)\n</code></pre>"},{"location":"development/#5-add-example","title":"5. Add Example","text":"<p>Create <code>examples/radar-chart.json</code>:</p> <pre><code>{\n  \"datasets\": [{ \"id\": \"data\", /* ... */ }],\n  \"marks\": [{\n    \"id\": \"radar\",\n    \"datasetId\": \"data\",\n    \"geometry\": \"radar\",\n    \"encode\": { /* ... */ }\n  }]\n}\n</code></pre>"},{"location":"development/#6-regenerate-schema","title":"6. Regenerate Schema","text":"<pre><code>cd ts &amp;&amp; npm run generate:schema\n</code></pre>"},{"location":"development/#7-run-all-tests","title":"7. Run All Tests","text":"<pre><code># TypeScript\ncd ts &amp;&amp; npm test\n\n# Go\ngo test -v ./...\n</code></pre>"},{"location":"development/#running-the-demo","title":"Running the Demo","text":"<p>The visual demo renders charts from IR in the browser:</p> <pre><code>cd ts\nnpm run demo\n# Opens http://localhost:3000\n</code></pre> <p>The demo includes:</p> <ul> <li>Line chart with smooth curves</li> <li>Bar chart with styling</li> <li>Stacked bar chart</li> <li>Pie chart with legend</li> <li>Multi-series chart</li> </ul>"},{"location":"development/#code-style","title":"Code Style","text":""},{"location":"development/#typescript_1","title":"TypeScript","text":"<ul> <li>ESLint with <code>@typescript-eslint</code> rules</li> <li>2-space indentation</li> <li>Semicolons required</li> <li>Single quotes for strings</li> </ul>"},{"location":"development/#go_1","title":"Go","text":"<ul> <li><code>gofmt</code> for formatting</li> <li><code>golangci-lint</code> for linting</li> <li>Standard Go conventions</li> </ul>"},{"location":"development/#cicd-workflows","title":"CI/CD Workflows","text":"Workflow Triggers Description Go CI Push/PR to <code>**.go</code> Tests on Go 1.25.x/1.26.x Go Lint Push/PR to <code>**.go</code> golangci-lint Go SAST Push/PR, weekly CodeQL security scan TS CI Push/PR to <code>ts/**</code> Tests on Node 20.x/22.x TS Lint Push/PR to <code>ts/**</code> ESLint"},{"location":"development/#contributing","title":"Contributing","text":"<ol> <li>Fork the repository</li> <li>Create a feature branch: <code>git checkout -b feat/my-feature</code></li> <li>Make changes with tests</li> <li>Run tests:</li> <li><code>npm test</code> (TypeScript)</li> <li><code>go test ./...</code> (Go)</li> <li>Run linters:</li> <li><code>npm run lint</code> (TypeScript)</li> <li><code>golangci-lint run</code> (Go)</li> <li>Commit using Conventional Commits:</li> <li><code>feat:</code> for new features</li> <li><code>fix:</code> for bug fixes</li> <li><code>docs:</code> for documentation</li> <li><code>test:</code> for tests</li> <li>Push and create a pull request</li> </ol>"},{"location":"development/#release-process","title":"Release Process","text":"<ol> <li>Update version in <code>ts/package.json</code></li> <li>Update <code>CHANGELOG.json</code> with new entries</li> <li>Run <code>schangelog generate CHANGELOG.json -o CHANGELOG.md</code></li> <li>Commit: <code>git commit -m \"chore: prepare vX.Y.Z release\"</code></li> <li>Tag: <code>git tag vX.Y.Z</code></li> <li>Push: <code>git push origin main --tags</code></li> </ol>"},{"location":"examples/","title":"Examples","text":"<p>This page shows complete EChartify IR examples for common chart types.</p>"},{"location":"examples/#line-chart","title":"Line Chart","text":"<p>A simple line chart with smooth curves.</p> <pre><code>{\n  \"title\": \"Weekly Sales Trend\",\n  \"datasets\": [{\n    \"id\": \"data\",\n    \"columns\": [\n      { \"name\": \"week\", \"type\": \"string\" },\n      { \"name\": \"sales\", \"type\": \"number\" }\n    ],\n    \"rows\": [\n      [\"Week 1\", \"1000\"],\n      [\"Week 2\", \"1500\"],\n      [\"Week 3\", \"1200\"],\n      [\"Week 4\", \"1800\"],\n      [\"Week 5\", \"2000\"]\n    ]\n  }],\n  \"marks\": [{\n    \"id\": \"line\",\n    \"datasetId\": \"data\",\n    \"geometry\": \"line\",\n    \"encode\": { \"x\": \"week\", \"y\": \"sales\" },\n    \"smooth\": true,\n    \"style\": { \"color\": \"#5470c6\" }\n  }],\n  \"axes\": [\n    { \"id\": \"x\", \"type\": \"category\", \"position\": \"bottom\" },\n    { \"id\": \"y\", \"type\": \"value\", \"position\": \"left\", \"name\": \"Sales ($)\" }\n  ],\n  \"tooltip\": { \"show\": true, \"trigger\": \"axis\" }\n}\n</code></pre>"},{"location":"examples/#bar-chart","title":"Bar Chart","text":"<p>A vertical bar chart with styling.</p> <pre><code>{\n  \"title\": \"Monthly Revenue\",\n  \"datasets\": [{\n    \"id\": \"data\",\n    \"columns\": [\n      { \"name\": \"month\", \"type\": \"string\" },\n      { \"name\": \"revenue\", \"type\": \"number\" }\n    ],\n    \"rows\": [\n      [\"Jan\", \"4200\"],\n      [\"Feb\", \"3800\"],\n      [\"Mar\", \"5100\"],\n      [\"Apr\", \"4600\"],\n      [\"May\", \"5800\"]\n    ]\n  }],\n  \"marks\": [{\n    \"id\": \"bar\",\n    \"datasetId\": \"data\",\n    \"geometry\": \"bar\",\n    \"encode\": { \"x\": \"month\", \"y\": \"revenue\" },\n    \"style\": {\n      \"color\": \"#91cc75\",\n      \"borderColor\": \"#73a857\",\n      \"borderWidth\": 1\n    }\n  }],\n  \"axes\": [\n    { \"id\": \"x\", \"type\": \"category\", \"position\": \"bottom\" },\n    { \"id\": \"y\", \"type\": \"value\", \"position\": \"left\" }\n  ]\n}\n</code></pre>"},{"location":"examples/#stacked-bar-chart","title":"Stacked Bar Chart","text":"<p>Multiple series stacked on top of each other.</p> <pre><code>{\n  \"title\": \"Quarterly Sales by Region\",\n  \"datasets\": [{\n    \"id\": \"data\",\n    \"columns\": [\n      { \"name\": \"quarter\", \"type\": \"string\" },\n      { \"name\": \"north\", \"type\": \"number\" },\n      { \"name\": \"south\", \"type\": \"number\" },\n      { \"name\": \"east\", \"type\": \"number\" }\n    ],\n    \"rows\": [\n      [\"Q1\", \"1000\", \"800\", \"1200\"],\n      [\"Q2\", \"1200\", \"900\", \"1100\"],\n      [\"Q3\", \"1100\", \"1000\", \"1300\"],\n      [\"Q4\", \"1400\", \"1100\", \"1500\"]\n    ]\n  }],\n  \"marks\": [\n    {\n      \"id\": \"north\",\n      \"datasetId\": \"data\",\n      \"geometry\": \"bar\",\n      \"encode\": { \"x\": \"quarter\", \"y\": \"north\" },\n      \"stack\": \"total\",\n      \"name\": \"North\"\n    },\n    {\n      \"id\": \"south\",\n      \"datasetId\": \"data\",\n      \"geometry\": \"bar\",\n      \"encode\": { \"x\": \"quarter\", \"y\": \"south\" },\n      \"stack\": \"total\",\n      \"name\": \"South\"\n    },\n    {\n      \"id\": \"east\",\n      \"datasetId\": \"data\",\n      \"geometry\": \"bar\",\n      \"encode\": { \"x\": \"quarter\", \"y\": \"east\" },\n      \"stack\": \"total\",\n      \"name\": \"East\"\n    }\n  ],\n  \"axes\": [\n    { \"id\": \"x\", \"type\": \"category\", \"position\": \"bottom\" },\n    { \"id\": \"y\", \"type\": \"value\", \"position\": \"left\" }\n  ],\n  \"legend\": { \"show\": true, \"position\": \"top\" }\n}\n</code></pre>"},{"location":"examples/#pie-chart","title":"Pie Chart","text":"<p>A pie chart with legend and tooltips.</p> <pre><code>{\n  \"title\": \"Market Share\",\n  \"datasets\": [{\n    \"id\": \"data\",\n    \"columns\": [\n      { \"name\": \"company\", \"type\": \"string\" },\n      { \"name\": \"share\", \"type\": \"number\" }\n    ],\n    \"rows\": [\n      [\"Company A\", \"35\"],\n      [\"Company B\", \"28\"],\n      [\"Company C\", \"22\"],\n      [\"Company D\", \"15\"]\n    ]\n  }],\n  \"marks\": [{\n    \"id\": \"pie\",\n    \"datasetId\": \"data\",\n    \"geometry\": \"pie\",\n    \"encode\": { \"value\": \"share\", \"name\": \"company\" }\n  }],\n  \"legend\": { \"show\": true, \"position\": \"right\" },\n  \"tooltip\": { \"show\": true, \"trigger\": \"item\" }\n}\n</code></pre>"},{"location":"examples/#scatter-plot","title":"Scatter Plot","text":"<p>A scatter plot for correlation analysis.</p> <pre><code>{\n  \"title\": \"Height vs Weight\",\n  \"datasets\": [{\n    \"id\": \"data\",\n    \"columns\": [\n      { \"name\": \"height\", \"type\": \"number\" },\n      { \"name\": \"weight\", \"type\": \"number\" }\n    ],\n    \"rows\": [\n      [\"165\", \"60\"],\n      [\"170\", \"65\"],\n      [\"175\", \"72\"],\n      [\"180\", \"80\"],\n      [\"185\", \"85\"],\n      [\"168\", \"62\"],\n      [\"172\", \"68\"],\n      [\"178\", \"75\"]\n    ]\n  }],\n  \"marks\": [{\n    \"id\": \"scatter\",\n    \"datasetId\": \"data\",\n    \"geometry\": \"scatter\",\n    \"encode\": { \"x\": \"height\", \"y\": \"weight\" },\n    \"style\": { \"color\": \"#ee6666\", \"opacity\": 0.8 }\n  }],\n  \"axes\": [\n    { \"id\": \"x\", \"type\": \"value\", \"position\": \"bottom\", \"name\": \"Height (cm)\" },\n    { \"id\": \"y\", \"type\": \"value\", \"position\": \"left\", \"name\": \"Weight (kg)\" }\n  ],\n  \"tooltip\": { \"show\": true, \"trigger\": \"item\" }\n}\n</code></pre>"},{"location":"examples/#area-chart","title":"Area Chart","text":"<p>An area chart with gradient fill.</p> <pre><code>{\n  \"title\": \"Website Traffic\",\n  \"datasets\": [{\n    \"id\": \"data\",\n    \"columns\": [\n      { \"name\": \"date\", \"type\": \"string\" },\n      { \"name\": \"visitors\", \"type\": \"number\" }\n    ],\n    \"rows\": [\n      [\"Mon\", \"820\"],\n      [\"Tue\", \"932\"],\n      [\"Wed\", \"901\"],\n      [\"Thu\", \"934\"],\n      [\"Fri\", \"1290\"],\n      [\"Sat\", \"1330\"],\n      [\"Sun\", \"1120\"]\n    ]\n  }],\n  \"marks\": [{\n    \"id\": \"area\",\n    \"datasetId\": \"data\",\n    \"geometry\": \"area\",\n    \"encode\": { \"x\": \"date\", \"y\": \"visitors\" },\n    \"smooth\": true,\n    \"style\": { \"color\": \"#5470c6\", \"opacity\": 0.7 }\n  }],\n  \"axes\": [\n    { \"id\": \"x\", \"type\": \"category\", \"position\": \"bottom\" },\n    { \"id\": \"y\", \"type\": \"value\", \"position\": \"left\" }\n  ]\n}\n</code></pre>"},{"location":"examples/#multi-series-line-chart","title":"Multi-Series Line Chart","text":"<p>Multiple lines on the same chart.</p> <pre><code>{\n  \"title\": \"Temperature Comparison\",\n  \"datasets\": [{\n    \"id\": \"data\",\n    \"columns\": [\n      { \"name\": \"month\", \"type\": \"string\" },\n      { \"name\": \"tokyo\", \"type\": \"number\" },\n      { \"name\": \"london\", \"type\": \"number\" },\n      { \"name\": \"sydney\", \"type\": \"number\" }\n    ],\n    \"rows\": [\n      [\"Jan\", \"7\", \"5\", \"26\"],\n      [\"Feb\", \"8\", \"6\", \"26\"],\n      [\"Mar\", \"11\", \"9\", \"24\"],\n      [\"Apr\", \"15\", \"12\", \"21\"],\n      [\"May\", \"19\", \"15\", \"17\"],\n      [\"Jun\", \"22\", \"18\", \"14\"]\n    ]\n  }],\n  \"marks\": [\n    {\n      \"id\": \"tokyo\",\n      \"datasetId\": \"data\",\n      \"geometry\": \"line\",\n      \"encode\": { \"x\": \"month\", \"y\": \"tokyo\" },\n      \"name\": \"Tokyo\",\n      \"style\": { \"color\": \"#5470c6\" }\n    },\n    {\n      \"id\": \"london\",\n      \"datasetId\": \"data\",\n      \"geometry\": \"line\",\n      \"encode\": { \"x\": \"month\", \"y\": \"london\" },\n      \"name\": \"London\",\n      \"style\": { \"color\": \"#91cc75\" }\n    },\n    {\n      \"id\": \"sydney\",\n      \"datasetId\": \"data\",\n      \"geometry\": \"line\",\n      \"encode\": { \"x\": \"month\", \"y\": \"sydney\" },\n      \"name\": \"Sydney\",\n      \"style\": { \"color\": \"#ee6666\" }\n    }\n  ],\n  \"axes\": [\n    { \"id\": \"x\", \"type\": \"category\", \"position\": \"bottom\" },\n    { \"id\": \"y\", \"type\": \"value\", \"position\": \"left\", \"name\": \"\u00b0C\" }\n  ],\n  \"legend\": { \"show\": true, \"position\": \"top\" },\n  \"tooltip\": { \"show\": true, \"trigger\": \"axis\" }\n}\n</code></pre>"},{"location":"examples/#using-examples","title":"Using Examples","text":""},{"location":"examples/#typescript","title":"TypeScript","text":"<pre><code>import { chartIRSchema, compile } from \"@grokify/echartify\";\nimport * as echarts from \"echarts\";\n\n// Parse and validate the IR\nconst ir = chartIRSchema.parse(exampleJson);\n\n// Compile to ECharts option\nconst option = compile(ir);\n\n// Render\nconst chart = echarts.init(document.getElementById(\"chart\"));\nchart.setOption(option);\n</code></pre>"},{"location":"examples/#more-examples","title":"More Examples","text":"<p>See the <code>examples/</code> directory for additional JSON files, or run the interactive demo:</p> <pre><code>cd ts\nnpm run demo\n</code></pre>"},{"location":"getting-started/","title":"Getting Started","text":""},{"location":"getting-started/#installation","title":"Installation","text":"TypeScript/JavaScriptGo <pre><code>npm install @grokify/echartify\n</code></pre> <pre><code>go get github.com/grokify/echartify\n</code></pre>"},{"location":"getting-started/#basic-usage","title":"Basic Usage","text":""},{"location":"getting-started/#typescript","title":"TypeScript","text":"<pre><code>import { chartIRSchema, compile } from \"@grokify/echartify\";\nimport * as echarts from \"echarts\";\n\n// Define chart using simple, uniform IR\nconst chartIR = {\n  title: \"Sales Trend\",\n  datasets: [{\n    id: \"sales\",\n    columns: [\n      { name: \"month\", type: \"string\" },\n      { name: \"revenue\", type: \"number\" }\n    ],\n    rows: [[\"Jan\", \"100\"], [\"Feb\", \"150\"], [\"Mar\", \"200\"]]\n  }],\n  marks: [{\n    id: \"line1\",\n    datasetId: \"sales\",\n    geometry: \"line\",\n    encode: { x: \"month\", y: \"revenue\" },\n    smooth: true\n  }],\n  axes: [\n    { id: \"x\", type: \"category\", position: \"bottom\" },\n    { id: \"y\", type: \"value\", position: \"left\" }\n  ]\n};\n\n// Validate and compile\nconst validated = chartIRSchema.parse(chartIR);\nconst option = compile(validated);\n\n// Render\necharts.init(document.getElementById(\"chart\")).setOption(option);\n</code></pre>"},{"location":"getting-started/#go","title":"Go","text":"<pre><code>package main\n\nimport (\n    \"encoding/json\"\n    \"fmt\"\n\n    \"github.com/grokify/echartify/chartir\"\n    \"github.com/grokify/echartify/schema\"\n)\n\nfunc main() {\n    // Access embedded JSON Schema\n    schemaBytes := schema.ChartIRSchemaBytes()\n    fmt.Printf(\"Schema size: %d bytes\\n\", len(schemaBytes))\n\n    // Use Go types for IR\n    ir := chartir.ChartIR{\n        Title: \"Sales Trend\",\n        Datasets: []chartir.Dataset{{\n            ID: \"sales\",\n            Columns: []chartir.Column{\n                {Name: \"month\", Type: \"string\"},\n                {Name: \"revenue\", Type: \"number\"},\n            },\n            Rows: [][]string{\n                {\"Jan\", \"100\"},\n                {\"Feb\", \"150\"},\n                {\"Mar\", \"200\"},\n            },\n        }},\n        Marks: []chartir.Mark{{\n            ID:        \"line1\",\n            DatasetID: \"sales\",\n            Geometry:  chartir.GeometryLine,\n            Encode:    chartir.Encode{X: \"month\", Y: \"revenue\"},\n        }},\n    }\n\n    // Serialize to JSON for frontend\n    data, _ := json.MarshalIndent(ir, \"\", \"  \")\n    fmt.Println(string(data))\n}\n</code></pre>"},{"location":"getting-started/#ai-assistant-integration","title":"AI Assistant Integration","text":"<p>EChartify is designed for AI assistants to generate charts reliably:</p> <pre><code>import { chartIRSchema, compile } from \"@grokify/echartify\";\n\n// AI generates JSON\nconst aiOutput = `{\n  \"datasets\": [{\n    \"id\": \"d1\",\n    \"columns\": [{\"name\": \"x\", \"type\": \"string\"}, {\"name\": \"y\", \"type\": \"number\"}],\n    \"rows\": [[\"1\", \"10\"], [\"2\", \"20\"]]\n  }],\n  \"marks\": [{\"id\": \"m1\", \"datasetId\": \"d1\", \"geometry\": \"line\", \"encode\": {\"x\": \"x\", \"y\": \"y\"}}]\n}`;\n\n// Validate with detailed errors\nconst result = chartIRSchema.safeParse(JSON.parse(aiOutput));\n\nif (result.success) {\n  const option = compile(result.data);\n  // Render chart...\n} else {\n  // Return errors to AI for correction\n  console.error(result.error.issues);\n}\n</code></pre>"},{"location":"getting-started/#visual-demo","title":"Visual Demo","text":"<p>Run the interactive demo to see charts rendered from IR:</p> <pre><code>cd ts\nnpm install\nnpm run demo\n# Opens http://localhost:3000 with interactive chart examples\n</code></pre>"},{"location":"getting-started/#next-steps","title":"Next Steps","text":"<ul> <li>Schema Reference - Learn the complete IR specification</li> <li>Examples - See more chart configurations</li> <li>API Reference - Explore TypeScript and Go APIs</li> </ul>"},{"location":"schema-reference/","title":"Schema Reference","text":"<p>The EChartify IR (Intermediate Representation) provides a non-polymorphic schema for defining charts. This page documents all types and their properties.</p>"},{"location":"schema-reference/#chartir-top-level","title":"ChartIR (Top-Level)","text":"<p>The root object containing all chart configuration.</p> <pre><code>interface ChartIR {\n  title?: string;           // Chart title\n  datasets: Dataset[];      // Data sources (required)\n  marks: Mark[];            // Visual representations (required)\n  axes?: Axis[];            // Chart axes\n  legend?: Legend;          // Legend configuration\n  tooltip?: Tooltip;        // Tooltip configuration\n  grid?: Grid;              // Grid positioning\n}\n</code></pre> Property Type Required Description <code>title</code> string No Chart title displayed at top <code>datasets</code> Dataset[] Yes One or more data sources <code>marks</code> Mark[] Yes Visual representations of data <code>axes</code> Axis[] No X and Y axis configurations <code>legend</code> Legend No Legend display settings <code>tooltip</code> Tooltip No Tooltip behavior settings <code>grid</code> Grid No Chart area positioning"},{"location":"schema-reference/#dataset","title":"Dataset","text":"<p>Data source with typed columns and string-based rows.</p> <pre><code>interface Dataset {\n  id: string;               // Unique identifier\n  columns: Column[];        // Typed column definitions\n  rows: string[][];         // Data rows (all values as strings)\n}\n\ninterface Column {\n  name: string;             // Column name\n  type: \"string\" | \"number\"; // Column data type\n}\n</code></pre> Property Type Required Description <code>id</code> string Yes Unique identifier referenced by marks <code>columns</code> Column[] Yes Column definitions with name and type <code>rows</code> string[][] Yes Data rows as string arrays <p>String-Based Values</p> <p>All row values are stored as strings to ensure static type compatibility. The compiler parses numeric strings to numbers based on the column type metadata.</p>"},{"location":"schema-reference/#example","title":"Example","text":"<pre><code>{\n  \"id\": \"sales\",\n  \"columns\": [\n    { \"name\": \"month\", \"type\": \"string\" },\n    { \"name\": \"revenue\", \"type\": \"number\" }\n  ],\n  \"rows\": [\n    [\"Jan\", \"1000\"],\n    [\"Feb\", \"1500\"],\n    [\"Mar\", \"1200\"]\n  ]\n}\n</code></pre>"},{"location":"schema-reference/#mark","title":"Mark","text":"<p>Visual representation of data from a dataset.</p> <pre><code>interface Mark {\n  id: string;               // Unique identifier\n  datasetId: string;        // Reference to dataset\n  geometry: Geometry;       // Visual type\n  encode: Encode;           // Data-to-visual mapping\n  coordinateSystem?: CoordinateSystem;\n  style?: Style;            // Visual styling\n  stack?: string;           // Stack group (for bar)\n  smooth?: boolean;         // Smooth curves (for line/area)\n  name?: string;            // Display name\n}\n</code></pre> Property Type Required Description <code>id</code> string Yes Unique identifier <code>datasetId</code> string Yes ID of dataset to visualize <code>geometry</code> Geometry Yes Chart type <code>encode</code> Encode Yes Data field mappings <code>coordinateSystem</code> CoordinateSystem No Coordinate system type <code>style</code> Style No Visual styling options <code>stack</code> string No Stack group name for stacked charts <code>smooth</code> boolean No Enable smooth curves (line/area) <code>name</code> string No Display name in legend"},{"location":"schema-reference/#encode","title":"Encode","text":"<p>Maps dataset columns to visual properties.</p> <pre><code>interface Encode {\n  x?: string;      // X-axis column (Cartesian)\n  y?: string;      // Y-axis column (Cartesian)\n  value?: string;  // Value column (pie)\n  name?: string;   // Name/label column (pie)\n  size?: string;   // Size column (scatter)\n  color?: string;  // Color column\n}\n</code></pre> Property Type Charts Description <code>x</code> string line, bar, scatter, area X-axis data column <code>y</code> string line, bar, scatter, area Y-axis data column <code>value</code> string pie Numeric value column <code>name</code> string pie Label/name column <code>size</code> string scatter Point size column <code>color</code> string all Color mapping column"},{"location":"schema-reference/#style","title":"Style","text":"<p>Visual styling properties.</p> <pre><code>interface Style {\n  color?: string;       // Primary color (hex or named)\n  opacity?: number;     // 0.0 to 1.0\n  borderColor?: string; // Border/stroke color\n  borderWidth?: number; // Border/stroke width\n}\n</code></pre>"},{"location":"schema-reference/#axis","title":"Axis","text":"<p>Axis configuration for Cartesian charts.</p> <pre><code>interface Axis {\n  id: string;           // Unique identifier\n  type: AxisType;       // Axis data type\n  position: AxisPosition; // Placement\n  name?: string;        // Axis label\n  min?: number;         // Minimum value\n  max?: number;         // Maximum value\n}\n</code></pre> Property Type Required Description <code>id</code> string Yes Unique identifier <code>type</code> AxisType Yes Data type for axis <code>position</code> AxisPosition Yes Where axis is displayed <code>name</code> string No Axis label text <code>min</code> number No Minimum axis value <code>max</code> number No Maximum axis value"},{"location":"schema-reference/#legend","title":"Legend","text":"<p>Legend configuration.</p> <pre><code>interface Legend {\n  show?: boolean;           // Show/hide legend\n  position?: LegendPosition; // Placement\n  items?: string[];         // Explicit legend items\n}\n</code></pre>"},{"location":"schema-reference/#tooltip","title":"Tooltip","text":"<p>Tooltip configuration.</p> <pre><code>interface Tooltip {\n  show?: boolean;           // Show/hide tooltip\n  trigger?: TooltipTrigger; // Trigger mode\n}\n</code></pre>"},{"location":"schema-reference/#grid","title":"Grid","text":"<p>Chart area positioning.</p> <pre><code>interface Grid {\n  left?: string | number;   // Left margin\n  right?: string | number;  // Right margin\n  top?: string | number;    // Top margin\n  bottom?: string | number; // Bottom margin\n  width?: string | number;  // Explicit width\n  height?: string | number; // Explicit height\n  containLabel?: boolean;   // Include axis labels in grid\n}\n</code></pre>"},{"location":"schema-reference/#enums","title":"Enums","text":""},{"location":"schema-reference/#geometry","title":"Geometry","text":"<p>Chart visualization types.</p> Value Description <code>line</code> Line chart <code>bar</code> Bar chart <code>pie</code> Pie chart <code>scatter</code> Scatter plot <code>area</code> Area chart (line with fill)"},{"location":"schema-reference/#coordinatesystem","title":"CoordinateSystem","text":"Value Description <code>cartesian2d</code> Standard X/Y coordinates <code>polar</code> Polar coordinates <code>radial</code> Radial layout"},{"location":"schema-reference/#axistype","title":"AxisType","text":"Value Description <code>category</code> Discrete categories <code>value</code> Continuous numeric values <code>time</code> Time series data <code>log</code> Logarithmic scale"},{"location":"schema-reference/#axisposition","title":"AxisPosition","text":"Value Description <code>bottom</code> Bottom of chart (X-axis) <code>top</code> Top of chart (X-axis) <code>left</code> Left of chart (Y-axis) <code>right</code> Right of chart (Y-axis)"},{"location":"schema-reference/#legendposition","title":"LegendPosition","text":"Value Description <code>top</code> Above the chart <code>bottom</code> Below the chart <code>left</code> Left side <code>right</code> Right side"},{"location":"schema-reference/#tooltiptrigger","title":"TooltipTrigger","text":"Value Description <code>item</code> Trigger on data item hover <code>axis</code> Trigger on axis position <code>none</code> Disable tooltip"},{"location":"releases/changelog/","title":"Changelog","text":"<p>All notable changes to this project will be documented in this file.</p> <p>The format is based on Keep a Changelog, this project adheres to Semantic Versioning, commits follow Conventional Commits, and this changelog is generated by Structured Changelog.</p>"},{"location":"releases/changelog/#unreleased","title":"Unreleased","text":""},{"location":"releases/changelog/#v010-2026-02-21","title":"v0.1.0 - 2026-02-21","text":""},{"location":"releases/changelog/#highlights","title":"Highlights","text":"<ul> <li>Non-polymorphic JSON IR for Apache ECharts enabling reliable AI-assisted chart generation</li> <li>TypeScript-first architecture with Zod schemas as source of truth</li> <li>Dual-language support: TypeScript/JavaScript and Go implementations</li> </ul>"},{"location":"releases/changelog/#added","title":"Added","text":"<ul> <li>ChartIR types for non-polymorphic ECharts configuration (Dataset, Mark, Axis, Legend, Tooltip, Grid) (<code>261fe51</code>)</li> <li>TypeScript implementation with Zod schemas for validation (<code>b8a6ab2</code>)</li> <li>IR-to-ECharts compiler supporting line, bar, pie, scatter, and area charts (<code>b8a6ab2</code>)</li> <li>Go types matching the TypeScript schema definitions (<code>261fe51</code>)</li> <li>JSON Schema generation from Zod schemas (<code>2123ff4</code>)</li> <li>Embedded JSON Schema in Go via <code>//go:embed</code> (<code>2123ff4</code>)</li> <li>Example chart definitions: line, bar, pie, multi-series (<code>2a5aea7</code>)</li> <li>Interactive browser demo with live chart rendering (<code>b8a6ab2</code>)</li> <li>CodeQL SAST security scanning workflow (<code>28c08b5</code>)</li> </ul>"},{"location":"releases/changelog/#fixed","title":"Fixed","text":"<ul> <li>Use local EChartsOption type to avoid echarts import issues in CI (<code>397d5d7</code>)</li> <li>Add ESLint configuration for TypeScript CI (<code>bac9b4a</code>)</li> </ul>"},{"location":"releases/changelog/#documentation","title":"Documentation","text":"<ul> <li>Product Requirements Document (PRD.md) with problem statement and design goals (<code>f489fa9</code>)</li> <li>Technical Requirements Document (TRD.md) with architecture overview (<code>f489fa9</code>)</li> <li>README with Quick Start, IR Schema Reference, and API documentation (<code>f489fa9</code>)</li> <li>Example usage for AI assistant integration (<code>f489fa9</code>)</li> <li>MkDocs site with Material theme: Getting Started, Schema Reference, Examples, API Reference, Architecture, Development guides (<code>f52644f</code>)</li> </ul>"},{"location":"releases/changelog/#build","title":"Build","text":"<ul> <li>Go CI workflow with multi-platform matrix (Go 1.26.x/1.25.x, Linux/macOS/Windows) (<code>9a06b69</code>)</li> <li>Go Lint workflow with golangci-lint (<code>9a06b69</code>)</li> <li>TypeScript CI workflow with Node.js 20.x/22.x (<code>9a06b69</code>)</li> <li>TypeScript Lint workflow with ESLint 9.x flat config (<code>bac9b4a</code>)</li> <li>Reusable workflow architecture via grokify/.github (<code>9a06b69</code>)</li> </ul>"},{"location":"releases/changelog/#tests","title":"Tests","text":"<ul> <li>53 TypeScript tests covering schemas, compiler, and examples (<code>b8a6ab2</code>)</li> <li>10 Go tests for chartir types and schema embedding (<code>261fe51</code>)</li> </ul>"},{"location":"releases/v0.1.0/","title":"EChartify v0.1.0 Release Notes","text":"<p>Release Date: 2026-02-21</p>"},{"location":"releases/v0.1.0/#overview","title":"Overview","text":"<p>EChartify v0.1.0 is the initial release of a non-polymorphic JSON Intermediate Representation (IR) for Apache ECharts. This library enables AI assistants and developers to reliably generate and validate chart configurations using a simple, uniform schema.</p>"},{"location":"releases/v0.1.0/#highlights","title":"Highlights","text":"<ul> <li>Non-polymorphic JSON IR - Same structure for all chart types, eliminating the complexity of ECharts' polymorphic options</li> <li>TypeScript-first architecture - Zod schemas serve as the source of truth with full type inference</li> <li>Dual-language support - Both TypeScript/JavaScript and Go implementations available</li> </ul>"},{"location":"releases/v0.1.0/#key-features","title":"Key Features","text":""},{"location":"releases/v0.1.0/#chart-ir-schema","title":"Chart IR Schema","text":"<p>The IR supports common chart types with a unified structure:</p> Component Description Dataset Typed columns with string-based rows for static compatibility Mark Visual representation with geometry type (line, bar, pie, scatter, area) Axis Category, value, time, and log axis types Legend Configurable position and visibility Tooltip Item and axis trigger modes Grid Layout positioning"},{"location":"releases/v0.1.0/#ir-to-echarts-compiler","title":"IR-to-ECharts Compiler","text":"<p>The TypeScript compiler transforms IR documents into valid ECharts options:</p> <ul> <li>Automatic type coercion (string \u2192 number based on column metadata)</li> <li>Geometry-specific option mapping</li> <li>Encode field translation</li> </ul>"},{"location":"releases/v0.1.0/#validation","title":"Validation","text":"<p>Zod schemas provide runtime validation with detailed error messages, ideal for AI-generated content validation loops.</p>"},{"location":"releases/v0.1.0/#installation","title":"Installation","text":"<pre><code># TypeScript/JavaScript\nnpm install @grokify/echartify\n\n# Go\ngo get github.com/grokify/echartify\n</code></pre>"},{"location":"releases/v0.1.0/#quick-example","title":"Quick Example","text":"<pre><code>import { chartIRSchema, compile } from \"@grokify/echartify\";\n\nconst ir = {\n  datasets: [{\n    id: \"data\",\n    columns: [\n      { name: \"month\", type: \"string\" },\n      { name: \"sales\", type: \"number\" }\n    ],\n    rows: [[\"Jan\", \"100\"], [\"Feb\", \"150\"], [\"Mar\", \"200\"]]\n  }],\n  marks: [{\n    id: \"line\",\n    datasetId: \"data\",\n    geometry: \"line\",\n    encode: { x: \"month\", y: \"sales\" }\n  }]\n};\n\nconst option = compile(chartIRSchema.parse(ir));\n// Use with echarts.setOption(option)\n</code></pre>"},{"location":"releases/v0.1.0/#test-coverage","title":"Test Coverage","text":"<ul> <li>TypeScript: 53 tests covering schemas, compiler, and examples</li> <li>Go: 10 tests covering type definitions and schema embedding</li> </ul>"},{"location":"releases/v0.1.0/#cicd","title":"CI/CD","text":"<p>All workflows passing:</p> <ul> <li>Go CI (1.26.x/1.25.x on Linux/macOS/Windows)</li> <li>Go Lint (golangci-lint)</li> <li>Go SAST (CodeQL)</li> <li>TypeScript CI (Node.js 20.x/22.x)</li> <li>TypeScript Lint (ESLint 9.x)</li> </ul>"},{"location":"releases/v0.1.0/#documentation","title":"Documentation","text":"<ul> <li>Getting Started - Installation and basic usage</li> <li>Schema Reference - Complete IR specification</li> <li>API Reference - TypeScript and Go APIs</li> <li>Architecture - Technical design</li> <li>Changelog - Version history</li> </ul>"},{"location":"releases/v0.1.0/#whats-next","title":"What's Next","text":"<p>Potential future enhancements:</p> <ul> <li>Additional chart types (radar, heatmap, treemap)</li> <li>Go compiler implementation</li> <li>npm package publication</li> <li>GitHub Pages deployment for documentation</li> </ul>"},{"location":"releases/v0.1.0/#links","title":"Links","text":"<ul> <li>Repository: https://github.com/grokify/echartify</li> <li>TypeScript Package: <code>@grokify/echartify</code></li> <li>Go Module: <code>github.com/grokify/echartify</code></li> </ul>"}]}